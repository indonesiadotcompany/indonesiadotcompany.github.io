<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
	<meta name="generator" content="Hugo 0.62.2" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog Indonesiadot.Com &middot; Web log of Indonesiadot.Com, Linux and updated technology
    
  </title>

  
  <link rel="stylesheet" href="https://blog.indonesiadot.com/css/poole.css">
  <link rel="stylesheet" href="https://blog.indonesiadot.com/css/syntax.css">
  <link rel="stylesheet" href="https://blog.indonesiadot.com/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.indonesiadot.com/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://blog.indonesiadot.com/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.indonesiadot.com/atom.xml">
</head>


  <body class="theme-base-0c">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Blog dari <a href="https://indonesiadot.com" target="_blank">Indonesiadot.Com</a> adalah tempat menuliskan sesuatu mengenai teknologi, oprek, dan mengenai Indonesiadot.Com.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item  active " href="https://blog.indonesiadot.com/">Home</a>
    <a class="sidebar-nav-item " href="https://blog.indonesiadot.com/post">Posts</a>

    
    
      
        <a class="sidebar-nav-item " href="https://blog.indonesiadot.com/about/">About</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <a class="sidebar-nav-item " href="https://blog.indonesiadot.com/tags/">Tags</a>
      
    
      
        <a class="sidebar-nav-item " href="https://blog.indonesiadot.com/thanks/">Thanks</a>
      
    

  </nav>

  <div class="sidebar-item">
    <p>&copy; 2020. All rights reserved.</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://blog.indonesiadot.com/" title="Home">Blog Indonesiadot.Com</a>
            <small>Web log of Indonesiadot.Com, Linux and updated technology</small>
          </h3>
        </div>
      </div>

      <div class="container content">





<div class="post">
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/26/tmux-screen-tips/">Tmux screen tips</a></h1>
        <span class="post-date">Oct 26, 2019</span>
	<h1 id="tmux-cheatsheet">Tmux cheatsheet</h1>
<h1 id="tmux-shortcuts--cheatsheet">tmux shortcuts &amp; cheatsheet</h1>
<p>start new:</p>
<pre><code>tmux
</code></pre>
<p>start new with session name:</p>
<pre><code>tmux new -s myname
</code></pre>
<p>attach:</p>
<pre><code>tmux a  #  (or at, or attach)
</code></pre>
<p>attach to named:</p>
<pre><code>tmux a -t myname
</code></pre>
<p>list sessions:</p>
<pre><code>tmux ls
</code></pre>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->kill session:</p>
<pre><code>tmux kill-session -t myname
</code></pre>
<p><!-- raw HTML omitted --><!-- raw HTML omitted -->Kill all the tmux sessions:</p>
<pre><code>tmux ls | grep : | cut -d. -f1 | awk '{print substr($1, 0, length($1)-1)}' | xargs kill
</code></pre>
<p>In tmux, hit the prefix <code>ctrl+b</code> (my modified prefix is ctrl+a) and then:</p>
<h2 id="sessions">Sessions</h2>
<pre><code>:new&lt;CR&gt;  new session
s  list sessions
$  name session
</code></pre>
<h2 id="a-namewindowstabsawindows-tabs"><!-- raw HTML omitted --><!-- raw HTML omitted -->Windows (tabs)</h2>
<pre><code>c  create window
w  list windows
n  next window
p  previous window
f  find window
,  name window
&amp;  kill window
</code></pre>
<h2 id="a-namepanessplitsapanes-splits"><!-- raw HTML omitted --><!-- raw HTML omitted -->Panes (splits)</h2>
<pre><code>%  vertical split
&quot;  horizontal split

o  swap panes
q  show pane numbers
x  kill pane
+  break pane into window (e.g. to select text by mouse to copy)
-  restore pane from window
⍽  space - toggle between layouts
&lt;prefix&gt; q (Show pane numbers, when the numbers show up type the key to goto that pane)
&lt;prefix&gt; { (Move the current pane left)
&lt;prefix&gt; } (Move the current pane right)
&lt;prefix&gt; z toggle pane zoom
</code></pre>
<h2 id="a-namesyncpanesasync-panes"><!-- raw HTML omitted --><!-- raw HTML omitted -->Sync Panes</h2>
<p>You can do this by switching to the appropriate window, typing your Tmux prefix (commonly Ctrl-B or Ctrl-A) and then a colon to bring up a Tmux command line, and typing:</p>
<pre><code>:setw synchronize-panes
</code></pre><p>You can optionally add on or off to specify which state you want; otherwise the option is simply toggled. This option is specific to one window, so it won’t change the way your other sessions or windows operate. When you’re done, toggle it off again by repeating the command. <a href="http://blog.sanctum.geek.nz/sync-tmux-panes/">tip source</a></p>
<h2 id="resizing-panes">Resizing Panes</h2>
<p>You can also resize panes if you don’t like the layout defaults. I personally rarely need to do this, though it’s handy to know how. Here is the basic syntax to resize panes:</p>
<pre><code>PREFIX : resize-pane -D (Resizes the current pane down)
PREFIX : resize-pane -U (Resizes the current pane upward)
PREFIX : resize-pane -L (Resizes the current pane left)
PREFIX : resize-pane -R (Resizes the current pane right)
PREFIX : resize-pane -D 20 (Resizes the current pane down by 20 cells)
PREFIX : resize-pane -U 20 (Resizes the current pane upward by 20 cells)
PREFIX : resize-pane -L 20 (Resizes the current pane left by 20 cells)
PREFIX : resize-pane -R 20 (Resizes the current pane right by 20 cells)
PREFIX : resize-pane -t 2 20 (Resizes the pane with the id of 2 down by 20 cells)
PREFIX : resize-pane -t -L 20 (Resizes the pane with the id of 2 left by 20 cells)
</code></pre>
<h2 id="copy-mode">Copy mode:</h2>
<p>Pressing PREFIX [ places us in Copy mode. We can then use our movement keys to move our cursor around the screen. By default, the arrow keys work. we set our configuration file to use Vim keys for moving between windows and resizing panes so we wouldn’t have to take our hands off the home row. tmux has a vi mode for working with the buffer as well. To enable it, add this line to .tmux.conf:</p>
<pre><code>setw -g mode-keys vi
</code></pre>
<p>With this option set, we can use h, j, k, and l to move around our buffer.</p>
<p>To get out of Copy mode, we just press the ENTER key. Moving around one character at a time isn’t very efficient. Since we enabled vi mode, we can also use some other visible shortcuts to move around the buffer.</p>
<p>For example, we can use &ldquo;w&rdquo; to jump to the next word and &ldquo;b&rdquo; to jump back one word. And we can use &ldquo;f&rdquo;, followed by any character, to jump to that character on the same line, and &ldquo;F&rdquo; to jump backwards on the line.</p>
<pre><code>   Function                vi             emacs
   Back to indentation     ^              M-m
   Clear selection         Escape         C-g
   Copy selection          Enter          M-w
   Cursor down             j              Down
   Cursor left             h              Left
   Cursor right            l              Right
   Cursor to bottom line   L
   Cursor to middle line   M              M-r
   Cursor to top line      H              M-R
   Cursor up               k              Up
   Delete entire line      d              C-u
   Delete to end of line   D              C-k
   End of line             $              C-e
   Goto line               :              g
   Half page down          C-d            M-Down
   Half page up            C-u            M-Up
   Next page               C-f            Page down
   Next word               w              M-f
   Paste buffer            p              C-y
   Previous page           C-b            Page up
   Previous word           b              M-b
   Quit mode               q              Escape
   Scroll down             C-Down or J    C-Down
   Scroll up               C-Up or K      C-Up
   Search again            n              n
   Search backward         ?              C-r
   Search forward          /              C-s
   Start of line           0              C-a
   Start selection         Space          C-Space
   Transpose chars                        C-t
</code></pre>
<h2 id="misc">Misc</h2>
<pre><code>d  detach
t  big clock
?  list shortcuts
:  prompt
</code></pre>
<h2 id="configurations-options">Configurations Options:</h2>
<pre><code># Mouse support - set to on if you want to use the mouse
* setw -g mode-mouse off
* set -g mouse-select-pane off
* set -g mouse-resize-pane off
* set -g mouse-select-window off

# Set the default terminal mode to 256color mode
set -g default-terminal &quot;screen-256color&quot;

# enable activity alerts
setw -g monitor-activity on
set -g visual-activity on

# Center the window list
set -g status-justify centre

# Maximize and restore a pane
unbind Up bind Up new-window -d -n tmp \; swap-pane -s tmp.1 \; select-window -t tmp
unbind Down
bind Down last-window \; swap-pane -s tmp.1 \; kill-window -t tmp
</code></pre>
<h2 id="resources">Resources:</h2>
<ul>
<li><a href="http://pragprog.com/book/bhtmux/tmux">tmux: Productive Mouse-Free Development</a></li>
<li><a href="http://superuser.com/questions/343572/tmux-how-do-i-reorder-my-windows">How to reorder windows</a></li>
</ul>
<h2 id="notes">Notes:</h2>
<ul>
<li></li>
</ul>
<h2 id="changelog">Changelog:</h2>
<ul>
<li>1411143833002 - Added <a href="#PanesSplits">toggle zoom</a> under Panes (splits) section.</li>
<li>1411143833002 - <a href="#syncPanes">Added Sync Panes</a></li>
<li>1414276652677 - <a href="#killAllSessions">Added Kill all tmux sessions </a></li>
<li>1438585211173 - <a href="#WindowsTabs">corrected create and add next and previus thanks to @justinjhendrick</a></li>
</ul>
<h2 id="request-an-update">Request an Update:</h2>
<p>We Noticed that our Cheatsheet is growing and people are coloberating to add new tips and tricks, so please tweet to me what would you like to add and let's make it better!</p>
<p>Referensi:</p>
<ul>
<li><a href="https://tmuxcheatsheet.com/">https://tmuxcheatsheet.com/</a></li>
<li><a href="https://gist.github.com/MohamedAlaa/2961058">https://gist.github.com/MohamedAlaa/2961058</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/tmux/">tmux</a>, <a href="https://blog.indonesiadot.com/tags/tips/">tips</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/25/create-gcp-vm-using-gcloud-from-command-line/">Create GCP VM using gcloud from command line</a></h1>
        <span class="post-date">Oct 25, 2019</span>
	<p>Pembuatan virtual machine di GCP / Google Cloud Platform menggunakan gcloud command line bermanfaat untuk mempermudah pembuatan VM tanpa harus mengakses web browser.</p>
<p>Berikut langkah nya yang dilakukan di OS Centos 7:</p>
<pre><code>sudo tee -a /etc/yum.repos.d/google-cloud-sdk.repo &lt;&lt; EOM
[google-cloud-sdk]
name=Google Cloud SDK
baseurl=https://packages.cloud.google.com/yum/repos/cloud-sdk-el7-x86_64
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg
       https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
EOM
sudo yum install google-cloud-sdk
gcloud init
</code></pre><p>Berikut langkah yang dilakukan di OS ubuntu / debian:</p>
<pre><code>echo &quot;deb http://packages.cloud.google.com/apt cloud-sdk main&quot; | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
sudo apt-get update &amp;&amp; sudo apt-get install google-cloud-sdk
gcloud init
</code></pre><p>Pada saat initialize ini akan diminta untuk memasukan user google yang akan digunakan, diikuti saja semua langkah nya sampai dengan memasukan verifikasi.</p>
<p>Setelah itu bisa menjalankan script 1-gcp-centos.sh berikut:</p>
<pre><code>bash 1-gcp-centos.sh namavm
</code></pre><p>Berikut script 1-gcp-centos.sh</p>
<pre><code>#!/bin/bash

if [ -z &quot;$1&quot; ]; then
 NAMA=$1
 while [ -z &quot;$NAMA&quot; ]; do
  echo &quot;masukan nama vm:&quot;
  read NAMA
 done
 # Create GCE VM with disk storage
 gcloud compute instances create $NAMA \
  --machine-type f1-micro \
  --network default \
  --subnet default \
  --network-tier PREMIUM \
  --maintenance-policy MIGRATE \
  --scopes https://www.googleapis.com/auth/devstorage.read_only,https://www.googleapis.com/auth/logging.write,https://www.googleapis.com/auth/monitoring.write,https://www.googleapis.com/auth/servicecontrol,https://www.googleapis.com/auth/service.management.readonly,https://www.googleapis.com/auth/trace.append \
  --image centos-7-v20191014 \
  --image-project centos-cloud \
  --boot-disk-size 10GB \
  --boot-disk-type pd-standard \
  --boot-disk-device-name compute-disk
fi
</code></pre><p>Referensi:</p>
<ul>
<li><a href="https://cloud.google.com/sdk/docs/quickstart-redhat-centos">https://cloud.google.com/sdk/docs/quickstart-redhat-centos</a></li>
<li><a href="https://github.com/garystafford/ansible-gcp-demo">https://github.com/garystafford/ansible-gcp-demo</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/cloud/">cloud</a>, <a href="https://blog.indonesiadot.com/tags/gcp/">gcp</a>, <a href="https://blog.indonesiadot.com/tags/google-cloud-platform/">google-cloud-platform</a>, <a href="https://blog.indonesiadot.com/tags/google/">google</a>, <a href="https://blog.indonesiadot.com/tags/gcloud/">gcloud</a>, <a href="https://blog.indonesiadot.com/tags/command/">command</a>, <a href="https://blog.indonesiadot.com/tags/bash/">bash</a>, <a href="https://blog.indonesiadot.com/tags/script/">script</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/25/gcp-and-ansible/">GCP and Ansible</a></h1>
        <span class="post-date">Oct 25, 2019</span>
	<p>Referensi:</p>
<ul>
<li><a href="https://programmaticponderings.com/2019/01/30/getting-started-with-red-hat-ansible-for-google-cloud-platform/">https://programmaticponderings.com/2019/01/30/getting-started-with-red-hat-ansible-for-google-cloud-platform/</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/cloud/">cloud</a>, <a href="https://blog.indonesiadot.com/tags/gcp/">gcp</a>, <a href="https://blog.indonesiadot.com/tags/google-cloud-platform/">google-cloud-platform</a>, <a href="https://blog.indonesiadot.com/tags/google/">google</a>, <a href="https://blog.indonesiadot.com/tags/ansible/">ansible</a>, <a href="https://blog.indonesiadot.com/tags/automation/">automation</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/15/kernel-hardening-tips/">Kernel Hardening Tips</a></h1>
        <span class="post-date">Oct 15, 2019</span>
	<h2 id="disable-and-blacklist-linux-modules">Disable and blacklist Linux modules</h2>
<p>Misal kita ingin blacklist module firewire_core, maka kita buat file /etc/modprobe.d/blacklist-firewire.conf yang isinya</p>
<pre><code>blacklist firewire_core
install firewire_core /bin/true
</code></pre><p>Referensi:</p>
<ul>
<li>CIS_Red_Hat_Enterprise_Linux_7_Benchmark_v2.2.0.pdf</li>
<li><a href="https://linux-audit.com/kernel-hardening-disable-and-blacklist-linux-modules/">https://linux-audit.com/kernel-hardening-disable-and-blacklist-linux-modules/</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/kernel/">kernel</a>, <a href="https://blog.indonesiadot.com/tags/security/">security</a>, <a href="https://blog.indonesiadot.com/tags/hardening/">hardening</a>, <a href="https://blog.indonesiadot.com/tags/tips/">tips</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/14/android-usb-file-transfer/">Android USB File Transfer</a></h1>
        <span class="post-date">Oct 14, 2019</span>
	<h2 id="android-usb-file-transfer">Android USB File Transfer</h2>
<pre><code>add-apt-repository ppa:webupd8team/unstable
apt update
apt-get install go-mtpfs
mkdir /media/MyAndroid
</code></pre><h3 id="mount">mount</h3>
<pre><code>go-mtpfs /media/MyAndroid
</code></pre><h3 id="unmount">unmount</h3>
<pre><code>fusermount -u /media/MyAndroid
</code></pre><p>or you can use softdatacable from damiapp at play store, after install the software then you can start the computer transfer, it will open <a href="ftp://ip.of.android:8888,">ftp://ip.of.android:8888,</a> so you can access from pc via ftp client like filezilla.</p>
<p>Referensi:</p>
<ul>
<li><a href="http://www.webupd8.org/2012/12/how-to-mount-android-40-ubuntu-go-mtpfs.html">http://www.webupd8.org/2012/12/how-to-mount-android-40-ubuntu-go-mtpfs.html</a></li>
<li><a href="https://askubuntu.com/questions/626941/how-to-access-my-androids-files-using-wi-fi-in-ubuntu">https://askubuntu.com/questions/626941/how-to-access-my-androids-files-using-wi-fi-in-ubuntu</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/tips/">tips</a>, <a href="https://blog.indonesiadot.com/tags/android/">android</a>, <a href="https://blog.indonesiadot.com/tags/file/">file</a>, <a href="https://blog.indonesiadot.com/tags/mtp/">mtp</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/14/centos-7-firewalld-masquerade/">Centos 7 Firewalld masquerade</a></h1>
        <span class="post-date">Oct 14, 2019</span>
	<h2 id="firewalld-masquerade">Firewalld masquerade</h2>
<pre><code>firewall-cmd --get-active-zones
firewall-cmd --list-all --zone=public
firewall-cmd --add-masquerade --zone=public --permanent
firewall-cmd --reload
firewall-cmd --list-all --zone=public
</code></pre><p>Referensi:</p>
<ul>
<li><a href="https://myredhatcertification.wordpress.com/2015/04/26/firewalld-masquerade-forwarding-transparent-proxy/">https://myredhatcertification.wordpress.com/2015/04/26/firewalld-masquerade-forwarding-transparent-proxy/</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/server/">server</a>, <a href="https://blog.indonesiadot.com/tags/centos/">centos</a>, <a href="https://blog.indonesiadot.com/tags/firewalld/">firewalld</a>, <a href="https://blog.indonesiadot.com/tags/masquerade/">masquerade</a>, <a href="https://blog.indonesiadot.com/tags/nat/">nat</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/14/magic-of-sed/">Magic of Sed</a></h1>
        <span class="post-date">Oct 14, 2019</span>
	<h2 id="insert-every-line-in-linux">Insert every line in linux</h2>
<pre><code>sed 's/^/apt-get purge -y /' aptwantopurge.txt &gt; aptpurge.txt
</code></pre><h2 id="comment-out-a-line-that-contain-string">comment out a line that contain string</h2>
<pre><code>sed -i '/ 2001 /s/^/#/' file
</code></pre><p>Referensi:</p>
<ul>
<li><a href="https://www.google.com/search?q=insert+every+line+linux&amp;oq=insert+every+line+linux">https://www.google.com/search?q=insert+every+line+linux&amp;oq=insert+every+line+linux</a></li>
<li><a href="https://stackoverflow.com/questions/4080526/using-sed-to-insert-text-at-the-beginning-of-each-line">https://stackoverflow.com/questions/4080526/using-sed-to-insert-text-at-the-beginning-of-each-line</a></li>
<li><a href="https://www.google.com/search?q=sed+cheatsheet&amp;oq=sed+cheatsheet">https://www.google.com/search?q=sed+cheatsheet&amp;oq=sed+cheatsheet</a></li>
<li><a href="https://gist.github.com/widyamedia/c6a14e81375b8c1394f14f6e5d456521">https://gist.github.com/widyamedia/c6a14e81375b8c1394f14f6e5d456521</a></li>
<li><a href="https://stackoverflow.com/questions/24883826/sed-tr-etc-how-to-comment-out-a-line-that-contains-string-in-a-file">https://stackoverflow.com/questions/24883826/sed-tr-etc-how-to-comment-out-a-line-that-contains-string-in-a-file</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/server/">server</a>, <a href="https://blog.indonesiadot.com/tags/sed/">sed</a>, <a href="https://blog.indonesiadot.com/tags/bash/">bash</a>, <a href="https://blog.indonesiadot.com/tags/tips/">tips</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/13/doh-dns-over-https/">DOH DNS over HTTPS</a></h1>
        <span class="post-date">Oct 13, 2019</span>
	<h2 id="security-dns-di-sisi-client">Security DNS di sisi client</h2>
<h3 id="install-dnscrypt-proxy">Install dnscrypt-proxy</h3>
<pre><code>add-apt-repository ppa:shevchuk/dnscrypt-proxy
apt update
apt install dnscrypt-proxy
</code></pre><p>Edit file /etc/dnscrypt-proxy/dnscrypt-proxy.toml dan rubah variabel <strong>server_name</strong> menjadi seperti contoh berikut:</p>
<pre><code>server_names = ['cloudflare', 'google']
</code></pre><p>lalu restart service dnscrypt-proxy</p>
<pre><code>systemctl restart dnscrypt-proxy
</code></pre><p>edit /etc/resolv.conf agar mengarah ke dnscrypt-proxy</p>
<pre><code>nameserver 127.0.2.1
</code></pre><h2 id="install-dns-over-https-server">Install DNS over HTTPS server</h2>
<h3 id="install-dengan-cara-paket-instalasi-deb">Install dengan cara paket instalasi deb</h3>
<pre><code>wget &quot;https://www.aaflalo.me/?smd_process_download=1&amp;download_id=1326&quot;
mv index* doh-server.deb
dpkg -i doh-server_*_amd64.deb
</code></pre><h3 id="install-dengan-cara-compile">Install dengan cara compile</h3>
<pre><code>wget https://dl.google.com/go/go1.13.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.13.linux-amd64.tar.gz
wget https://github.com/m13253/dns-over-https/archive/v2.1.2.tar.gz
tar xzf v2.1.2.tar.gz
cd dns-over-https-2.1.2
make &amp;&amp; make install
add-apt-repository ppa:ondrej/nginx
apt update
apt install nginx-full
</code></pre><p>Buat file /etc/nginx/sites-available/doh yang isinya:</p>
<pre><code>upstream dns-backend {
    server 127.0.0.1:8053;
}
server {
        listen 80;
        server_name dns.example.com;
        root /var/www/html/dns;
        access_log /var/log/nginx/dns.access.log;
         location /dns-query {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_set_header X-NginX-Proxy true;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_redirect off;
                proxy_set_header        X-Forwarded-Proto $scheme;
                proxy_read_timeout 86400;
                proxy_pass http://dns-backend/dns-query ;
        }
}
</code></pre><p>lalu jalankan</p>
<pre><code>ln -s /etc/nginx/sites-available/dns-over-https /etc/nginx/sites-enabled/dns-over-https
nginx -t
systemctl reload nginx
add-apt-repository ppa:certbot/certbot
apt update
apt install python-certbot-nginx
certbot --nginx -d dns.example.com
</code></pre><p>If that’s successful, certbot will ask how you’d like to configure your HTTPS settings.</p>
<pre><code>Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.
-------------------------------------------------------------------------------
1: No redirect - Make no further changes to the webserver configuration.
2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for
new sites, or if you're confident your site works on HTTPS. You can undo this
change by editing your web server's configuration.
-------------------------------------------------------------------------------
Select the appropriate number [1-2] then [enter] (press 'c' to cancel):
</code></pre><p>I advise to choose redirect to be sure it use only HTTPS.</p>
<p>Edit the file /etc/letsencrypt/options-ssl-nginx.conf and replace its content by this.</p>
<pre><code>ssl_session_cache shared:le_nginx_SSL:1m;
ssl_session_timeout 1440m;
ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
# Enable modern TLS cipher suites
ssl_ciphers 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256';
# The order of cipher suites matters
ssl_prefer_server_ciphers on;
add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;
</code></pre><p>Then reload nginx.</p>
<pre><code>systemctl reload nginx
</code></pre><h2 id="tips">TIPS</h2>
<p>Untuk menggunakan server DOH yang telah kita buat pada dnscrypt-proxy client, buat stamp dulu di <a href="https://dnscrypt.info/stamps/">https://dnscrypt.info/stamps/</a></p>
<p><img src="images/doh.png" alt="DOH"></p>
<p>lalu isi nama doh dan stamp nya seperti contoh:</p>
<pre><code>[static]

[static.'gcp']
   stamp = 'sdns://AgcAAAAAAAAADTM0Ljg3LjExNy4xMDUADWdjcC5iaXJhdS5jb20KL2Rucy1xdWVyeQ'
[static.'doh']
   stamp = 'sdns://AgcAAAAAAAAACzQ1Ljc3LjM2LjU0ABJkb2guYmlyYXUuY29tOjM0NDMKL2Rucy1xdWVyeQ'
</code></pre><p>dan tambahkan dibagian server_name menjadi seperti ini:</p>
<pre><code>server_names = ['doh', 'gcp', 'cloudflare', 'google']
</code></pre><p>Referensi:</p>
<ul>
<li><a href="https://www.aaflalo.me/2018/10/tutorial-setup-dns-over-https-server/">https://www.aaflalo.me/2018/10/tutorial-setup-dns-over-https-server/</a></li>
<li><a href="https://github.com/m13253/dns-over-https">https://github.com/m13253/dns-over-https</a></li>
<li><a href="https://dnscrypt.info/stamps/">https://dnscrypt.info/stamps/</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/dns/">dns</a>, <a href="https://blog.indonesiadot.com/tags/doh/">doh</a>, <a href="https://blog.indonesiadot.com/tags/dnsoverhttps/">dnsoverhttps</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/10/10/belajar-ansible-tower/">Belajar Ansible Tower</a></h1>
        <span class="post-date">Oct 10, 2019</span>
	<h2 id="install-ansible-tower">Install Ansible Tower</h2>
<p>Persyaratan:</p>
<p>Hardware: RAM minimal 3,75 GB
OS: Centos 7</p>
<p>Langkah yang dilakukan</p>
<pre><code>yum install -y ansible
wget http://releases.ansible.com/ansible-tower/setup/ansible-tower-setup-latest.tar.gz
tar -xzvf ansible-tower-setup-latest.tar.gz
cd ansible-tower-setup-3.1.5/
(edit inventory file, isi bagian yang dibutuhkan terutama password)
(edit roles/preflight/defaults/main.yml, jika ingin menurunkan minimal ram)
./setup.sh
</code></pre><h2 id="configure-ansible-tower-after-installation">Configure Ansible Tower after installation</h2>
<p>Akses Ansible tower Web UI dari</p>
<pre><code>https://&lt;Ansible Tower IP or Hostname&gt;
</code></pre><p>Dapatkan lisensi dari <a href="https://www.ansible.com/license">https://www.ansible.com/license</a>
lalu masukkan license tersebut ke halaman awal setelah login</p>
<h2 id="untuk-centos-7">Untuk centos 7</h2>
<p>seting selinux state ke permissive</p>
<pre><code>SELINUX=permissive
</code></pre><p>tambahkan firewall untuk https</p>
<pre><code>systemctl enable firewalld
firewall-cmd --add-service=http --permanent;firewall-cmd --add-service=https --permanent
systemctl restart firewalld
</code></pre><h2 id="ansible-tower-license">Ansible tower license</h2>
<pre><code>{
    &quot;company_name&quot;: &quot;widyamedia&quot;,
    &quot;contact_email&quot;: &quot;widyamedia@gmail.com&quot;,
    &quot;contact_name&quot;: &quot;widya media&quot;,
    &quot;hostname&quot;: &quot;0f6a792b962445f2b0cd337a1ebb05c2&quot;,
    &quot;instance_count&quot;: 10,
    &quot;license_date&quot;: 2116912142,
    &quot;license_key&quot;: &quot;0c8906958684422f6b25a2748a285f3c63601899b0bca26df2dc4d2805ec05c6&quot;,
    &quot;license_type&quot;: &quot;basic&quot;,
    &quot;subscription_name&quot;: &quot;Red Hat Ansible Tower, Self-Support (10 Managed Nodes)&quot;
}
</code></pre><p>Referensi:</p>
<ul>
<li><a href="https://www.ansible.com/products/tower/trial">https://www.ansible.com/products/tower/trial</a></li>
<li><a href="https://docs.ansible.com/ansible-tower/">https://docs.ansible.com/ansible-tower/</a></li>
<li><a href="http://devopstechie.com/install-and-configure-ansible-tower-centos7/">http://devopstechie.com/install-and-configure-ansible-tower-centos7/</a></li>
<li><a href="https://www.google.com/search?q=ansible+tower+postgresql+replication">https://www.google.com/search?q=ansible+tower+postgresql+replication</a></li>
<li><a href="https://servicesblog.redhat.com/2019/04/08/ansible-tower-high-availability-and-disaster-recovery/">https://servicesblog.redhat.com/2019/04/08/ansible-tower-high-availability-and-disaster-recovery/</a></li>
<li><a href="https://github.com/samdoran/ansible-role-pgsql-replication">https://github.com/samdoran/ansible-role-pgsql-replication</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/ansible/">ansible</a>, <a href="https://blog.indonesiadot.com/tags/ansibletower/">ansibletower</a>, <a href="https://blog.indonesiadot.com/tags/postgresql/">postgresql</a>, <a href="https://blog.indonesiadot.com/tags/rabbitmq/">rabbitmq</a>
	 <hr/>
    </div>
  
</div>

<div class="pagination">
  
  <a class="pagination-item older" href="https://blog.indonesiadot.com/page/8/">Older</a>
  

  
  <a class="pagination-item newer" href="https://blog.indonesiadot.com/page/6/">Newer</a>
  
</div>

<hr/>


<hr/>
Made with &hearts; using <a href="https://https://gohugo.io">hugo</a> by willing of <a href="https://www.google.com/search?q=asmaul+husna">Al-Khooliq Al-Mushowwir Al-Baari'</a>
<p>&nbsp;</p>

	</div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  </body>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147159427-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147159427-1');
</script>

</html>

