<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
	<meta name="generator" content="Hugo 0.57.2" />
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Blog Indonesiadot.Com &middot; Web log of Indonesiadot.Com, Linux and updated technology
    
  </title>

  
  <link rel="stylesheet" href="https://blog.indonesiadot.com/css/poole.css">
  <link rel="stylesheet" href="https://blog.indonesiadot.com/css/syntax.css">
  <link rel="stylesheet" href="https://blog.indonesiadot.com/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://blog.indonesiadot.com/assets/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://blog.indonesiadot.com/assets/favicon.ico">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://blog.indonesiadot.com/atom.xml">
</head>


  <body class="theme-base-0c">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Blog dari <a href="https://indonesiadot.com" target="_blank">Indonesiadot.Com</a> adalah tempat menuliskan sesuatu mengenai teknologi, oprek, dan mengenai Indonesiadot.Com.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item  active " href="https://blog.indonesiadot.com/">Home</a>
    
    <a class="sidebar-nav-item" href="https://blog.indonesiadot.com/post">Posts</a>
    <a class="sidebar-nav-item" href="https://blog.indonesiadot.com/tags">Tags</a>

    
    
      
        <a class="sidebar-nav-item " href="https://blog.indonesiadot.com/about/">About</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <a class="sidebar-nav-item " href="https://blog.indonesiadot.com/thanks/">Thanks</a>
      
    

  </nav>

  <div class="sidebar-item">
    <p>&copy; 2020. All rights reserved.</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="https://blog.indonesiadot.com/" title="Home">Blog Indonesiadot.Com</a>
            <small>Web log of Indonesiadot.Com, Linux and updated technology</small>
          </h3>
        </div>
      </div>

      <div class="container content">





<div class="post">
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/28/ids-tripwire/">IDS Tripwire</a></h1>
        <span class="post-date">Sep 28, 2019</span>
	<p>Referensi:</p>

<ul>
<li><a href="https://www.howtoforge.com/tutorial/how-to-monitor-and-detect-modified-files-using-tripwire-on-ubuntu-1604/">https://www.howtoforge.com/tutorial/how-to-monitor-and-detect-modified-files-using-tripwire-on-ubuntu-1604/</a></li>
<li><a href="https://www-uxsup.csx.cam.ac.uk/pub/doc/redhat/redhat7.3/rhl-rg-en-7.3/ch-tripwire.html">https://www-uxsup.csx.cam.ac.uk/pub/doc/redhat/redhat7.3/rhl-rg-en-7.3/ch-tripwire.html</a></li>
<li><a href="https://blog.rapid7.com/2017/05/24/how-to-install-and-configure-tripwire-ids-on-centos-7/">https://blog.rapid7.com/2017/05/24/how-to-install-and-configure-tripwire-ids-on-centos-7/</a></li>
<li><a href="https://medium.com/splunkuserdeveloperadministrator/role-your-own-file-system-monitor-with-tripwire-and-splunk-b80bd1b6e16d">https://medium.com/splunkuserdeveloperadministrator/role-your-own-file-system-monitor-with-tripwire-and-splunk-b80bd1b6e16d</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/ids/">ids</a>, <a href="https://blog.indonesiadot.com/tags/security/">security</a>, <a href="https://blog.indonesiadot.com/tags/tripwire/">tripwire</a>, <a href="https://blog.indonesiadot.com/tags/splunk/">splunk</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/24/hugo-hosting-dengan-github/">Hugo hosting dengan github</a></h1>
        <span class="post-date">Sep 24, 2019</span>
	<p>Ini adalah langkah yang saya lakukan untuk penempatan web hugo di github, sebelumnya buat dahulu di github nama repository agar tampil sebagai page / website, contoh:</p>

<ul>
<li>Nama user: tpinews</li>
<li>Nama repositori yang harus dibuat: tpinews.github.io</li>
</ul>

<p>Lalu kemudian pada lokal komputer dijalankan beberapa perintah berikut:</p>

<pre><code>mkdir tpinews
cd tpinews
touch .gitignore
git init
git add .
git commit -m 'komat kamit awal'
git remote add origin https://tpinews.github.io.git
git push origin master

git checkout -b hugo
hugo new site . --force
cp -r /path/kumpulanthemeshugo/travelify themes/
cp -r themes/travelify/exampleSite/* .
cp /path/scripts/push-deploy.sh .
git add .
git commit -m 'komit hugo'
git push origin hugo

git submodule add -b master https://tpinews.github.io.git public
./push-deploy.sh
git branch -d master
</code></pre>

<p>Pastikan juga config.toml sudah sesuai, seperti nama theme dan lainnya, dan bisa di test di localhost dengan menjalankan <code>hugo server</code> dan mengakses <a href="http://localhost:1313">http://localhost:1313</a> di browser untuk melihat hasilnya.</p>

<p>Command di atas hanya dilakukan pertama kali saja, untuk selanjutnya yang dilakukan setelah melakukan perubahan dan ingin mengupdate di github, cukup menjalankan script push-deploy.sh</p>

<p>Disini theme yang digunakan misalnya travelify yang sudah disiapkan, dan juga script untuk push-deploy.sh untuk memudahkan deploy sebagai berikut:</p>

<pre><code>#!/bin/sh
# If a command fails then the deploy stops
set -e
printf &quot;\033[0;32mPush to branch hugo...\033[0m\n&quot;
git add .
msg=&quot;rebuilding site $(date)&quot;
if [ -n &quot;$*&quot; ]; then
 msg=&quot;$*&quot;
fi
git commit -m &quot;$msg&quot;
git push origin hugo

printf &quot;\033[0;32mDeploy public hugo to branch master...\033[0m\n&quot;
HUGO_ENV=production hugo # if using a theme, replace with `hugo -t &lt;YOURTHEME&gt;`
cd public
git add .
msg=&quot;rebuilding site $(date)&quot;
if [ -n &quot;$*&quot; ]; then
        msg=&quot;$*&quot;
fi
git commit -m &quot;$msg&quot;
git push origin master

printf &quot;\033[0;32mPush to branch hugo...\033[0m\n&quot;
cd ..
git add .
msg=&quot;rebuilding site $(date)&quot;
if [ -n &quot;$*&quot; ]; then
        msg=&quot;$*&quot;
fi
git commit -m &quot;$msg&quot;
git push origin hugo
</code></pre>

<p>Note:</p>

<p>Untuk lebih mudah tidak perlu memasukan password, bisa di buat dari menu settings account github, lalu pilih menu sebelah kiri bawah bagian Developer settings, lalu Personal access tokens dan generate new token.</p>

<p>Lalu copy token tersebut dan tambahkan pada file .git/config dan .git/modules/public/config ,bagian url nya, sehingga menjadi seperti contoh berikut:</p>

<pre><code>   url = https://namauser:tokenhasidaricopygeneratenewtoken@namarepository.github.io.git
</code></pre>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/web/">web</a>, <a href="https://blog.indonesiadot.com/tags/ssg/">ssg</a>, <a href="https://blog.indonesiadot.com/tags/hugo/">hugo</a>, <a href="https://blog.indonesiadot.com/tags/github/">github</a>, <a href="https://blog.indonesiadot.com/tags/git/">git</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/24/markdown-tips/">Markdown tips</a></h1>
        <span class="post-date">Sep 24, 2019</span>
	

<h2 id="markdown-insert-image"><em>markdown</em> insert image</h2>

<p>Ini adalah <a href="https://www.petanikode.com/markdown-pemula/"><em>markdown</em></a> untuk menampilkan gambar yang terletak di dalam folder / direktori pada postingan di hugo</p>

<pre><code>![nama-image](path/to/image)
</code></pre>

<h2 id="markdown-insert-link">markdown insert link</h2>

<p>Ini adalah markdown untuk menampilkan link <em>url</em> pada kata atau kalimat di halaman web</p>

<pre><code>[kata atau kalimat](http://link.url/yang-dituju)
</code></pre>

<p>seperti contoh diatas</p>

<pre><code>[markdown](https://www.petanikode.com/markdown-pemula/)
</code></pre>

<p>Referensi markdown images:</p>

<ul>
<li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#images">https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#images</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/web/">web</a>, <a href="https://blog.indonesiadot.com/tags/markdown/">markdown</a>, <a href="https://blog.indonesiadot.com/tags/static-site-generator/">static-site-generator</a>, <a href="https://blog.indonesiadot.com/tags/ssg/">ssg</a>, <a href="https://blog.indonesiadot.com/tags/hugo/">hugo</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/04/linux-security-tools/">linux Security Tools</a></h1>
        <span class="post-date">Sep 4, 2019</span>
	<p>Tools yang biasa digunakan pada server linux:</p>

<ul>
<li><p>Firewall</p>

<ul>
<li>iptables</li>
<li>ipset</li>
<li>shorewall</li>
<li>csf</li>
</ul></li>

<li><p>Anti Malware</p>

<ul>
<li>maldet (malware detection for web directory)</li>
</ul></li>

<li><p>IDS</p>

<ul>
<li>tripwire</li>
</ul></li>

<li><p>Identity Server</p>

<ul>
<li><a href="https://freeipa.org">FreeIPA (IPA = Identity, Policy, Authentication)</a></li>
</ul></li>

<li><p>Security Checking / Scanning Solution</p>

<ul>
<li>OpenSCAP</li>
<li>Rapid7</li>
</ul></li>

<li><p>CMDB (configuration management database) adalah Information Technology Infrastructure Library database used by an organization to store information about hardware and software assets</p>

<ul>
<li>TeemIP</li>
<li>itop <a href="https://github.com/Combodo/iTop">https://github.com/Combodo/iTop</a></li>
<li>infoblox</li>
<li>efficientip</li>
<li>ansible-cmdb</li>
</ul></li>

<li><p>WAF</p>

<ul>
<li><a href="http://www.waf-fle.org/">http://www.waf-fle.org/</a> console / web view for modsecurity admin</li>
<li>modsecurity</li>
<li>naxsi <a href="https://github.com/nbs-system/naxsi">https://github.com/nbs-system/naxsi</a></li>
<li>shadow daemon <a href="https://shadowd.zecure.org/overview/introduction/">https://shadowd.zecure.org/overview/introduction/</a></li>
<li>imperva berbayar</li>
</ul></li>

<li><p>Web Scanner</p>

<ul>
<li>nikto ( <a href="https://geekflare.com/nikto-webserver-scanner/">https://geekflare.com/nikto-webserver-scanner/</a> )</li>
</ul></li>

<li><p>Pentest</p>

<ul>
<li>owasp-zap <a href="https://medium.com/volosoft/running-penetration-tests-for-your-website-as-a-simple-developer-with-owasp-zap-493d6a7e182b">https://medium.com/volosoft/running-penetration-tests-for-your-website-as-a-simple-developer-with-owasp-zap-493d6a7e182b</a></li>
<li>nessus <a href="https://www.tenable.com/tenable-for-education">https://www.tenable.com/tenable-for-education</a></li>
</ul></li>
</ul>

<p>Referensi Openscap:</p>

<ul>
<li><a href="https://www.open-scap.org/">https://www.open-scap.org/</a></li>
<li><a href="https://lifehacker.com/how-to-use-nessus-to-scan-a-network-for-vulnerabilities-1788261156">https://lifehacker.com/how-to-use-nessus-to-scan-a-network-for-vulnerabilities-1788261156</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/server/">server</a>, <a href="https://blog.indonesiadot.com/tags/tools/">tools</a>, <a href="https://blog.indonesiadot.com/tags/firewall/">firewall</a>, <a href="https://blog.indonesiadot.com/tags/security/">security</a>, <a href="https://blog.indonesiadot.com/tags/ids/">ids</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/02/linux-server-tools/">linux Server Tools</a></h1>
        <span class="post-date">Sep 2, 2019</span>
	<p>Tools yang biasa digunakan pada server linux:</p>

<ul>
<li><p>Virtualization (Desktop)</p>

<ul>
<li>Virtualbox</li>
</ul></li>

<li><p>Graphic</p>

<ul>
<li>Gimp</li>
</ul></li>

<li><p>Mail</p>

<ul>
<li>Thunderbird Mail (client)</li>
</ul></li>

<li><p>Multimedia</p>

<ul>
<li>Avidemux</li>
</ul></li>

<li><p>Video Conference</p>

<ul>
<li>jitsi</li>
<li><a href="https://medevel.com/10-os-video-conferencing/">More and more</a></li>
</ul></li>

<li><p>Customer support live chat</p>

<ul>
<li>rocket.chat</li>
<li>tawk.to</li>
<li><a href="https://github.com/juliancwirko/s-chat-app">simple chat</a></li>
</ul></li>

<li><p>Networking</p>

<ul>
<li><a href="https://www.linux.com/tutorials/monitoring-network-load-nload-part-2/">nload</a></li>
</ul></li>
</ul>

<p>Untuk security tools, seperti firewall, anti malware, scanning tools, di update di halaman berikut</p>

<ul>
<li><a href="https://blog.indonesiadot.com/2019/09/04/linux-security-tools/">https://blog.indonesiadot.com/2019/09/04/linux-security-tools/</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/server/">server</a>, <a href="https://blog.indonesiadot.com/tags/tools/">tools</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/02/proxmox-optimized-disk-for-auto-trim-/-shrink/">Proxmox optimized disk for auto trim / shrink</a></h1>
        <span class="post-date">Sep 2, 2019</span>
	<p>Dalam implementasi proxmox, yang harus diperhatikan adalah type disk pada awal pembuatan, ini berguna agar disk system secara keseluruhan tidak cepat full, dan fungsi dari <em>thin provision storage</em> atau storage yang bisa tetap thin sesuai file yang ada di vm, bukan berdasarkan disk yang dialokasikan.</p>

<p>Persyaratan adalah:</p>

<ul>
<li>menggunakan <em>thin provisioned backing storage</em> seperti qcow2, thin-lvm, zfs pada server proxmox nya</li>
<li>menggunakan Virtio SCSI controller pada guest option vm nya</li>
<li>Menggunakan SCSI bus/device saat pembuatan hdd pada guest vm nya dan check bagian discard option nya</li>
<li>Tambahkan discard mount options di /etc/fstab nya guest vm</li>
<li>Enable fstrim.timer pada systemctl</li>
</ul>

<p>Adapun langkahnya, disini dilakukan perubahan pada VM yang sebelumnya telah terbuat dengan Virtio disk, dari disk yang kedua dari VM, agar lebih aman, dirubah satu persatu, dimulai dari disk kedua terlebih dahulu:</p>

<ul>
<li>edit dulu /etc/fstab bagian disk dari /dev/vdb1 menjadi /dev/sda1 (sda untuk drive scsi / sata, untuk lebih aman nya di komen dulu bagian disk /hdbck, untuk di mount manual, agar pada saat boot jika salah tidak nyangkut)</li>
<li>shutdown vm</li>
<li>detach disk</li>
<li>edit disk, menjadi SCSI dan klik bagian advanced, lalu check discard</li>
<li>start vm</li>
<li>setelah login, jalankan fstrim -v /hdbck/</li>
</ul>

<p>Note:</p>

<ul>
<li>Untuk perubahan selanjutnya pada disk yang pertama, di edit dulu /etc/fstab nya, misal /dev/vda1 menjadi /dev/sda1, dan /dev/sda1 sebelumnya yg disk kedua yg telah di edit menjadi SCSI menjadi /dev/sdb1, lalu baru lakukan seperti langkah diatas dari shutdown vm sampai jalankan fstrim.</li>
<li>Masukan juga pada crontab, agar dijalankan fstrim setiap bulan, jika memakai centos 6 dan dibawahnya</li>
<li>Untuk membuktikannya, sambil mengecek di server proxmox dengan menggunakan command <code>zfs list</code> jika memakai zfs, <code>lvs</code> atau <code>lvdisplay</code> untuk thin-lvm, atau <code>du -sch</code> jika memakai qcow2 untuk mengetahui besar file sebelum dan setelah di guest vm nya dijalankan command <code>fstrim -av</code></li>
</ul>

<p>Referensi:</p>

<ul>
<li><a href="https://pve.proxmox.com/wiki/Shrink_Qcow2_Disk_Files">https://pve.proxmox.com/wiki/Shrink_Qcow2_Disk_Files</a></li>
<li><a href="https://kparal.wordpress.com/2017/10/06/automatically-shrink-your-vm-disk-images-when-you-delete-files/">https://kparal.wordpress.com/2017/10/06/automatically-shrink-your-vm-disk-images-when-you-delete-files/</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/server/">server</a>, <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/virtualization/">virtualization</a>, <a href="https://blog.indonesiadot.com/tags/proxmox/">proxmox</a>, <a href="https://blog.indonesiadot.com/tags/tips/">tips</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/02/postfix-tips/">Postfix tips</a></h1>
        <span class="post-date">Sep 2, 2019</span>
	

<h3 id="postfix-send-to-local-network">postfix send to local network</h3>

<p>Ini adalah langkah untuk membuat postfix mengirim ke mail server dalam LAN</p>

<pre><code>echo &quot;real.net smtp:[192.168.1.108]&quot; &gt;&gt; /etc/postfix/transport
postmap /etc/postfix/transport
systemctl restart postfix
</code></pre>

<p>Referensi:</p>

<ul>
<li><a href="https://www.linuxquestions.org/questions/linux-server-73/how-to-make-postfix-send-email-to-another-postfix-in-local-network-lan-694423/">https://www.linuxquestions.org/questions/linux-server-73/how-to-make-postfix-send-email-to-another-postfix-in-local-network-lan-694423/</a></li>
<li><a href="http://www.postfix.org/STANDARD_CONFIGURATION_README.html">http://www.postfix.org/STANDARD_CONFIGURATION_README.html</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/mail/">mail</a>, <a href="https://blog.indonesiadot.com/tags/postfix/">postfix</a>, <a href="https://blog.indonesiadot.com/tags/tips/">tips</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/02/all-about-kubernetes/">All about kubernetes</a></h1>
        <span class="post-date">Sep 2, 2019</span>
	

<h2 id="kubernetes-container-runtime-with-docker">Kubernetes Container runtime with docker</h2>

<pre><code># Install Docker CE
## Set up the repository
### Install required packages.
yum install yum-utils device-mapper-persistent-data lvm2

### Add Docker repository.
yum-config-manager \
  --add-repo \
  https://download.docker.com/linux/centos/docker-ce.repo

## Install Docker CE.
yum update &amp;&amp; yum install docker-ce-18.06.2.ce

## Create /etc/docker directory.
mkdir /etc/docker

# Setup daemon.
cat &gt; /etc/docker/daemon.json &lt;&lt;EOF
{
  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],
  &quot;log-driver&quot;: &quot;json-file&quot;,
  &quot;log-opts&quot;: {
    &quot;max-size&quot;: &quot;100m&quot;
  },
  &quot;storage-driver&quot;: &quot;overlay2&quot;,
  &quot;storage-opts&quot;: [
    &quot;overlay2.override_kernel_check=true&quot;
  ]
}
EOF

mkdir -p /etc/systemd/system/docker.service.d
systemctl daemon-reload
systemctl restart docker
</code></pre>

<ul>
<li><a href="https://kubernetes.io/docs/setup/production-environment/container-runtimes/">https://kubernetes.io/docs/setup/production-environment/container-runtimes/</a></li>
</ul>

<h2 id="kubernetes-master">kubernetes master</h2>

<pre><code>hostnamectl set-hostname master-node
cat &lt;&lt;EOF&gt;&gt; /etc/hosts
10.128.0.27 master-node
10.128.0.29 node-1 worker-node-1
10.128.0.30 node-2 worker-node-2
EOF
setenforce 0
sed -i --follow-symlinks 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/sysconfig/selinux
firewall-cmd --permanent --add-port=6443/tcp
firewall-cmd --permanent --add-port=2379-2380/tcp
firewall-cmd --permanent --add-port=10250/tcp
firewall-cmd --permanent --add-port=10251/tcp
firewall-cmd --permanent --add-port=10252/tcp
firewall-cmd --permanent --add-port=10255/tcp
firewall-cmd â€“reload

modprobe br_netfilter
cat &lt;&lt;EOF&gt;&gt; /etc/sysctl.d/100-kube.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF
sysctl --system

cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
EOF
yum install kubeadm
systemctl enable kubelet
systemctl start kubelet

swapoff -a

kubeadm init --apiserver-advertise-address=192.168.122.42 --pod-network-cidr=10.244.0.0/16
mkdir -p $HOME/.kube
# cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
# chown $(id -u):$(id -g) $HOME/.kube/config
kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml
kubectl get nodes
</code></pre>

<h2 id="kubernetes-node">kubernetes node</h2>

<pre><code>hostnamectl set-hostname 'node-1'
cat &lt;&lt;EOF&gt;&gt; /etc/hosts
10.128.0.27 master-node
10.128.0.29 node-1 worker-node-1
10.128.0.30 node-2 worker-node-2
EOF

setenforce 0
sed -i --follow-symlinks 's/SELINUX=enforcing/SELINUX=disabled/g' /etc/sysconfig/selinux

firewall-cmd --permanent --add-port=6783/tcp
firewall-cmd --permanent --add-port=10250/tcp
firewall-cmd --permanent --add-port=10255/tcp
firewall-cmd --permanent --add-port=30000-32767/tcp
firewall-cmd  --reload

cat &lt;&lt;EOF&gt;&gt; /etc/sysctl.d/100-kube.conf
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
EOF
sysctl --system

cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo
[kubernetes]
name=Kubernetes
baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
EOF

yum install kubeadm
systemctl enable kubelet
systemctl start kubelet
</code></pre>

<p>We now require the token that kubeadm init generated, to join the cluster. You can copy and paste it to your node-1 and node-2 if you had copied it somewhere.</p>

<pre><code>kubeadm join 10.128.0.27:6443 --token nu06lu.xrsux0ss0ixtnms5  --discovery-token-ca-cert-hash sha256:f996ea3564e6a07fdea2997a1cf8caeddafd6d4360d606dbc82314688425cd41 
</code></pre>

<h2 id="kubernetes-master-1">kubernetes master</h2>

<pre><code>kubectl get nodes
</code></pre>

<ul>
<li><a href="https://www.tecmint.com/install-kubernetes-cluster-on-centos-7/">https://www.tecmint.com/install-kubernetes-cluster-on-centos-7/</a></li>
<li><a href="https://www.howtoforge.com/tutorial/centos-kubernetes-docker-cluster/">https://www.howtoforge.com/tutorial/centos-kubernetes-docker-cluster/</a></li>
<li><a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/">https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/</a></li>
</ul>

<h2 id="kubernetes-kubeadm-show-join-command">kubernetes kubeadm show join command</h2>

<pre><code>kubeadm token create --print-join-command
</code></pre>

<h2 id="kubernetes-delete-node">kubernetes delete node</h2>

<pre><code>kubectl get nodes
kubectl drain &lt;namanode&gt;
kubectl delete node &lt;namanode&gt;
</code></pre>

<p>at the node, then type:</p>

<pre><code>kubeadm reset
</code></pre>

<ul>
<li><a href="https://stackoverflow.com/questions/35757620/how-to-gracefully-remove-a-node-from-kubernetes">https://stackoverflow.com/questions/35757620/how-to-gracefully-remove-a-node-from-kubernetes</a></li>
</ul>

<h2 id="kubernetes-external-storage-pv-pvc">Kubernetes external storage PV PVC</h2>

<ul>
<li><a href="https://kubernetes.io/docs/concepts/storage/volumes/#rbd">https://kubernetes.io/docs/concepts/storage/volumes/#rbd</a></li>
<li><a href="https://github.com/kubernetes-incubator/external-storage/tree/master/ceph/rbd">https://github.com/kubernetes-incubator/external-storage/tree/master/ceph/rbd</a></li>
<li><a href="https://github.com/kubernetes/examples/tree/master/volumes/rbd">https://github.com/kubernetes/examples/tree/master/volumes/rbd</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/kubernetes/">kubernetes</a>, <a href="https://blog.indonesiadot.com/tags/container/">container</a>, <a href="https://blog.indonesiadot.com/tags/docker/">docker</a>
	 <hr/>
    </div>
  
    <div class="post">
        <h1 class="post-title"><a href="https://blog.indonesiadot.com/2019/09/02/ubuntu-upgrade-14.04-to-16.04-to-18.04/">Ubuntu upgrade 14.04 to 16.04 to 18.04</a></h1>
        <span class="post-date">Sep 2, 2019</span>
	<p>Berikut langkah yang dilakukan, tapi sebelumnya pastikan backup, backup dan backup</p>

<pre><code>sudo apt-get update
sudo apt-get upgrade
sudo do-release-upgrade -f DistUpgradeViewNonInteractive
</code></pre>

<p>Referensi:</p>

<ul>
<li><a href="https://www.google.com/search?q=ubuntu+upgrade+14.04+to+16.04">https://www.google.com/search?q=ubuntu+upgrade+14.04+to+16.04</a></li>
<li><a href="https://medium.com/@shathi.ece/upgrade-ubuntu-14-04-lts-to-ubuntu-16-04-lts-d0225503efb4">https://medium.com/@shathi.ece/upgrade-ubuntu-14-04-lts-to-ubuntu-16-04-lts-d0225503efb4</a></li>
</ul>

	<hr/>
	
	
	 Tags:
	  <a href="https://blog.indonesiadot.com/tags/linux/">linux</a>, <a href="https://blog.indonesiadot.com/tags/ubuntu/">ubuntu</a>, <a href="https://blog.indonesiadot.com/tags/upgrade/">upgrade</a>
	 <hr/>
    </div>
  
</div>

<div class="pagination">
  
  <a class="pagination-item older" href="https://blog.indonesiadot.com/page/11/">Older</a>
  

  
  <a class="pagination-item newer" href="https://blog.indonesiadot.com/page/9/">Newer</a>
  
</div>

<hr/>


<hr/>
Made with &hearts; using <a href="https://https://gohugo.io">hugo</a> by willing of <a href="https://www.google.com/search?q=asmaul+husna">Al-Khooliq Al-Mushowwir Al-Baari'</a>
<p>&nbsp;</p>

	</div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
  </body>
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147159427-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147159427-1');
</script>

</html>

